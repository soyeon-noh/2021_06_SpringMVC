<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.callor.score.dao.ScoreDao">

	<select id="selectAll" resultType="ScoreVO">
		SELECT * FROM tbl_score
	</select>
	<select id="findById" resultType="ScoreVO">
		SELECT * FROM tlb_score WHERE sc_seq = #{sc_seq}
	</select>
	
	<select id="selectViewAll" resultType="ScoreDTO">
		SELECT sc_seq,
				sc_stnum,
				ST.st_name sc_stname,
				sc_sbcode,
				SB.sb_name sc_sbname,
				sc_score
		FROM tbl_score SC
			LEFT JOIN tbl_student ST
				ON SC.sc_stnum = ST.st_num
			LEFT JOIN tbl_subject SB
				ON SC.sc_sbcode = SB.sb_code
		ORDER BY sc_stnum, sc_sbcode
				
	</select>
	
	<insert id="insert" parameterType="ScoreVO">
		INSERT INTO tbl_score(
				sc_stnum, sc_sbcode, sc_score 
		)VALUES(
			#{sc_stnum}, #{sc_sbcode}, #{sc_score} 
		)
	</insert>
	<!-- SQL문을 마음껏 써도됨. 대신 새미콜론(;) 은 빼야함! -->
	<!-- 칼럼명은 대소문자 상관x VALUES안의 #{} 사이에는 무조건 소문자 -->
	<!-- VALUES에 있는 것은 VO에 들어있는 변수명으로 -->
	
	<!-- ? 대신에 #{}에 알아서 StudentVO에 맞춰서 값을 setting 해라 
		sessionFactory에서 다 해줌 -->
	
	<update id="update" parameterType="ScoreVO">
		UPDATE tbl_score SET
			sc_stnum		= #{sc_stnum},
			sc_sbcode		= #{sc_sbcode},
			sc_score	= #{sc_score},
		WHERE sc_seq	= #{sc_seq}	
	</update>
		
	<delete id="delete" parameterType="String"> <!-- parameterType="String"이거 안적어도됨. 디폴드인듯. -->
		DELETE FROM tbl_score WHERE sc_seq = #{sc_seq}
	</delete>
</mapper>